#!/bin/bash

# $1 nodename
# $2 racname
# $3 network

echo -en "creating VM $1..."

virt-install -q \
--check all=off \
-n $2-$1 \
--description "$2-$1" \
--ram=2048 \
--vcpus=2 \
--cpu host \
--os-variant rhel6 \
--accelerate \
--hvm \
--location=~/RAC-INSTALLER/www_html/OL6.5.iso \
--network network=$3-3,model=virtio \
--graphics vnc \
--disk path=~/RAC-INSTALLER/RAC_disks/$2-$1.img,format=qcow2,device=disk,size=300 \
--initrd-inject=~/RAC-INSTALLER/www_html/nfs.cfg \
--extra-args "ks=file:/nfs.cfg nodename=$1 racname=$2 network=$3" 
